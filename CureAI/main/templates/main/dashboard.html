{% extends 'main/base.html' %}
{% load static %}

{% block headcontent %}
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet" href="{% static 'css/app.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />

{% endblock %}


{% block navitemsright %}

<a class="btn btn-light m-1 px-3 py-2" style="background-color: white; border-radius: 999px;" href="/logout"><b>Log Out</b></a>

{% endblock %}



{% block content %}

{% if user.is_authenticated %}

  <div class="dcontainer" style="min-height: 70vh; margin: 2rem auto 2rem auto;">

    <div class="text-center p-5 mb-5">

      <div>
        <img class="img-fluid m-4" src="{% static 'img/user.png' %}" alt="" style="max-height: 150px; max-width: 1500px;"/>
        <h3>Username: {{user.username}}</h3>
        <h3>Email: {{user.email}}</h3>
      </div>
      <a class="btn btn-primary px-5 mt-4 mb-5" style="background-color: #2371d6;" href="/upload"><b>Detect Diseases</b></a>

    </div>

    <h2 class="text-center mt-4 mb-1">Prediction History</h2>


    <div class="table-responsive text-center px-5 mt-5">

      <table class="table">
        <thead class="thead-dark bg-dark text-light">
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Type</th>
            <th scope="col">Prediction</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>

          {% for p in predictions %}

            <tr>
              <th scope="row">{{ p.date|date:"d/m/y H:i a" }}</th>
              <td>{{ p.type }}</td>
              <td>{{ p.prediction }}</td>
              <td>{{ p.description }}</td>
            </tr>

          {% endfor %}

        </tbody>
      </table>

    </div>

    <div class="text-center p-5">
    </div>

  </div>
  
{% endif %}

{% endblock %}



{% block scripts %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
</script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


{% endblock %}